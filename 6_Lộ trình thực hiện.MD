L·ªô tr√¨nh D·ª± √°n TalkConnect (Project Roadmap)

L·ªô tr√¨nh n√†y ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n "B·∫£n ƒë·∫∑c t·∫£ T√≠nh nƒÉng Chi ti·∫øt (v1)" v√† chia d·ª± √°n th√†nh c√°c giai ƒëo·∫°n c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆∞·ª£c.

Giai ƒëo·∫°n 0: Kh·ªüi t·∫°o & N·ªÅn t·∫£ng (Tu·∫ßn 1-2)

M·ª•c ti√™u: Thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng, c∆° s·ªü d·ªØ li·ªáu v√† x√°c th·ª±c ng∆∞·ªùi d√πng.

Tu·∫ßn 1: C√†i ƒë·∫∑t & Backend Core

[ ] Kh·ªüi t·∫°o d·ª± √°n NestJS (Backend).

[ ] Kh·ªüi t·∫°o d·ª± √°n Next.js/React (Frontend).

[ ] C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán c∆° b·∫£n (TypeORM, Passport, Socket.IO, class-validator).

[ ] Thi·∫øt l·∫≠p k·∫øt n·ªëi CSDL (MySQL) v√† Redis.

[ ] (Database) Thi·∫øt k·∫ø v√† ch·∫°y migration cho 4 b·∫£ng: Users, Rooms, RoomParticipants, RoomChatMessages (d·ª±a tr√™n talkconnect_schema.sql).

Tu·∫ßn 2: X√°c th·ª±c & User

[ ] (Backend) Implement Module Auth:

[ ] POST /auth/register (T·∫°o ng∆∞·ªùi d√πng).

[ ] POST /auth/login (T·∫°o JWT Token).

[ ] (Backend) Implement JwtAuthGuard (cho API) v√† WsJwtGuard (cho Socket.IO).

[ ] (Frontend) T·∫°o trang Login / Register.

[ ] (Frontend) X·ª≠ l√Ω l∆∞u JWT token (v√†o Context ho·∫∑c localStorage).

Giai ƒëo·∫°n 1: MVP Backend - Logic nghi·ªáp v·ª• (Tu·∫ßn 3-4)

M·ª•c ti√™u: Ho√†n th√†nh t·∫•t c·∫£ c√°c REST API c·∫ßn thi·∫øt cho v1 (ngo·∫°i tr·ª´ real-time).

Tu·∫ßn 3: Logic Ph√≤ng (Room Logic)

[ ] (Backend) [F1] Implement POST /rooms (T·∫°o ph√≤ng).

Ph·∫£i bao g·ªìm logic t·∫°o Room v√† RoomParticipant (vai tr√≤ HOST).

[ ] (Backend) [F2] Implement GET /rooms (Kh√°m ph√° ph√≤ng).

Ph·∫£i bao g·ªìm logic l·ªçc (status='LIVE'), ph√¢n trang, v√† s·∫Øp x·∫øp.

[ ] (Backend) Implement GET /rooms/:roomId (Chi ti·∫øt ph√≤ng).

Tu·∫ßn 4: Logic Tham gia & Qu·∫£n l√Ω (Join & Management)

[ ] (Backend) [F4] Implement POST /rooms/:roomId/join (Tham gia ph√≤ng).

Ph·∫£i bao g·ªìm logic validation 4 b∆∞·ªõc (t·ªìn t·∫°i, status, b·ªã kick, ph√≤ng ƒë·∫ßy).

[ ] (Backend) [F7] Implement POST /rooms/:roomId/kick/:userId (Kick user).

Ph·∫£i bao g·ªìm logic ki·ªÉm tra quy·ªÅn Host v√† c·∫≠p nh·∫≠t is_kicked=1.

[ ] (Backend) [F6] Implement GET /rooms/:roomId/chat (L·∫•y l·ªãch s·ª≠ chat).

[ ] (Backend) Implement POST /rooms/:roomId/leave (R·ªùi ph√≤ng ch·ªß ƒë·ªông).

Giai ƒëo·∫°n 2: MVP Backend - Real-time (Tu·∫ßn 5-6)

M·ª•c ti√™u: T√≠ch h·ª£p Socket.IO v√† Redis Pub/Sub ƒë·ªÉ l√†m cho ·ª©ng d·ª•ng "s·ªëng".

Tu·∫ßn 5: Socket & Redis Scaling

[ ] (Backend) C·∫•u h√¨nh RoomsGateway (Socket.IO Gateway).

[ ] (Backend) T√≠ch h·ª£p RedisIoAdapter (cho ph√©p scaling nhi·ªÅu server).

[ ] (Backend) [F3] Implement Redis Pub/Sub:

[ ] RoomsService (khi t·∫°o/k·∫øt th√∫c ph√≤ng) PUBLISH s·ª± ki·ªán.

[ ] RoomsGateway SUBSCRIBE s·ª± ki·ªán v√† emit('room:list-update').

Tu·∫ßn 6: S·ª± ki·ªán Real-time

[ ] (Backend) [F5] Implement handleDisconnect (t·ª± ƒë·ªông r·ªùi ph√≤ng).

[ ] (Backend) [F5] Ho√†n thi·ªán checkAndEndRoom() (logic t·ª± ƒë·ªông ƒë√≥ng ph√≤ng khi 0 ng∆∞·ªùi).

[ ] (Backend) Implement @SubscribeMessage('room:join') v√† emit('room:user-joined').

[ ] (Backend) Implement @SubscribeMessage('room:leave') v√† emit('room:user-left').

[ ] (Backend) [F6] Implement @SubscribeMessage('chat:message') (l∆∞u CSDL v√† broadcast).

[ ] (Backend) [F7] Ho√†n thi·ªán logic kick (sau khi API c·∫≠p nh·∫≠t CSDL, emit('room:user-kicked')).

Giai ƒëo·∫°n 3: MVP Frontend - Giao di·ªán & T∆∞∆°ng t√°c (Tu·∫ßn 7-8)

M·ª•c ti√™u: X√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng ho√†n ch·ªânh cho v1 (ch·ªâ chat text).

Tu·∫ßn 7: S·∫£nh ch·ªù & T·∫°o ph√≤ng (Lobby)

[ ] (Frontend) T·∫°o SocketProvider ƒë·ªÉ qu·∫£n l√Ω k·∫øt n·ªëi Socket.IO.

[ ] (Frontend) [F2] T·∫°o Component RoomDiscovery.tsx (S·∫£nh ch·ªù).

[ ] G·ªçi API GET /rooms ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch ban ƒë·∫ßu.

[ ] (Frontend) [F3] T√≠ch h·ª£p socket.on('room:list-update') v√†o RoomDiscovery (t·ª± ƒë·ªông c·∫≠p nh·∫≠t UI).

[ ] (Frontend) [F1] T·∫°o Modal/Component "T·∫°o ph√≤ng" (g·ªçi POST /rooms).

Tu·∫ßn 8: Trong ph√≤ng (Room View)

[ ] (Frontend) [F4] X·ª≠ l√Ω logic tham gia ph√≤ng (g·ªçi POST /.../join, sau ƒë√≥ chuy·ªÉn trang sang /rooms/:id).

[ ] (Frontend) T·∫°o Component RoomView.tsx (layout ch√≠nh c·ªßa ph√≤ng).

[ ] (Frontend) [F6] T·∫°o Component ChatPanel.tsx:

[ ] GET /.../chat (l·∫•y l·ªãch s·ª≠).

[ ] emit('chat:message') (g·ª≠i tin).

[ ] on('chat:message') (nh·∫≠n tin).

[ ] (Frontend) [F5/F7] T·∫°o Component ParticipantsPanel.tsx:

[ ] on('room:user-joined'), on('room:user-left') (c·∫≠p nh·∫≠t danh s√°ch).

[ ] on('room:user-kicked') (x·ª≠ l√Ω b·ªã kick ho·∫∑c th·∫•y ng∆∞·ªùi kh√°c b·ªã kick).

[ ] Hi·ªÉn th·ªã n√∫t "Kick" (cho Host) v√† n√∫t "R·ªùi ph√≤ng".

Ho√†n th√†nh Giai ƒëo·∫°n 3: ƒê√£ c√≥ MVP v1 (Chat Text) ho·∫°t ƒë·ªông.

Giai ƒëo·∫°n 4: T√≠ch h·ª£p WebRTC (v2) (Tu·∫ßn 9-10)

M·ª•c ti√™u: Th√™m t√≠nh nƒÉng video/audio (ph·∫ßn kh√≥ nh·∫•t).

Tu·∫ßn 9: C√†i ƒë·∫∑t Media Server

[ ] (DevOps) C√†i ƒë·∫∑t v√† c·∫•u h√¨nh TURN/STUN Server (v√≠ d·ª•: coturn).

[ ] (Backend) C√†i ƒë·∫∑t Mediasoup (th∆∞ vi·ªán).

[ ] (Backend) Thi·∫øt l·∫≠p MediasoupWorker (c√°c ti·∫øn tr√¨nh x·ª≠ l√Ω media).

[ ] (Backend) M·ªü r·ªông RoomsService ƒë·ªÉ qu·∫£n l√Ω Mediasoup Routers cho m·ªói ph√≤ng.

Tu·∫ßn 10: Logic Signaling & Frontend

[ ] (Backend) Implement c√°c Socket.IO events (WebRTC signaling):

[ ] get-router-rtp-capabilities

[ ] create-webrtc-transport

[ ] connect-webrtc-transport

[ ] produce (b·∫Øt ƒë·∫ßu g·ª≠i video/audio)

[ ] consume (nh·∫≠n video/audio t·ª´ ng∆∞·ªùi kh√°c)

[ ] (Frontend) T√≠ch h·ª£p mediasoup-client.

[ ] (Frontend) Vi·∫øt logic WebRTCClient (x·ª≠ l√Ω to√†n b·ªô logic signaling).

[ ] (Frontend) T·∫°o c√°c <video> elements v√† g·∫Øn MediaStream v√†o.

[ ] (Frontend) Implement media:toggle-mic, media:toggle-video (g·ª≠i event l√™n server).

Giai ƒëo·∫°n 5: Ho√†n thi·ªán v2 & Tri·ªÉn khai (Tu·∫ßn 11-12)

M·ª•c ti√™u: Ho√†n thi·ªán c√°c t√≠nh nƒÉng n√¢ng cao v√† ƒë∆∞a l√™n production.

Tu·∫ßn 11: T√≠nh nƒÉng n√¢ng cao

[ ] (Backend+Frontend) Implement Screen Sharing (d√πng Mediasoup).

[ ] (Backend+Frontend) Implement Host Mute (Host emit s·ª± ki·ªán, Server broadcast cho client b·ªã mute).

[ ] (Backend+Frontend) Implement Reactions (üëç, ‚ù§Ô∏è) (d√πng Socket.IO).

Tu·∫ßn 12: T·ªëi ∆∞u & Tri·ªÉn khai

[ ] (Frontend) Ho√†n thi·ªán UI/UX.

[ ] (Backend) T·ªëi ∆∞u CSDL (ƒë√°nh index).

[ ] (Backend) T·ªëi ∆∞u Redis (cache s·ªë l∆∞·ª£ng ng∆∞·ªùi trong ph√≤ng).

[ ] (DevOps) Vi·∫øt k·ªãch b·∫£n Deployment (v√≠ d·ª•: Docker Compose).

[ ] (QA) Test t·∫£i (Load Testing) v√† S·ª≠a l·ªói.

[ ] TRI·ªÇN KHAI L√äN PRODUCTION.